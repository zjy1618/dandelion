function FastClick(t){"use strict";function i(t,i){return function(){return t.apply(i,arguments)}}var e;this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=t,FastClick.notNeeded(t)||(deviceIsAndroid&&(t.addEventListener("mouseover",i(this.onMouse,this),!0),t.addEventListener("mousedown",i(this.onMouse,this),!0),t.addEventListener("mouseup",i(this.onMouse,this),!0)),t.addEventListener("click",i(this.onClick,this),!0),t.addEventListener("touchstart",i(this.onTouchStart,this),!1),t.addEventListener("touchmove",i(this.onTouchMove,this),!1),t.addEventListener("touchend",i(this.onTouchEnd,this),!1),t.addEventListener("touchcancel",i(this.onTouchCancel,this),!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(i,e,o){var s=Node.prototype.removeEventListener;"click"===i?s.call(t,i,e.hijacked||e,o):s.call(t,i,e,o)},t.addEventListener=function(i,e,o){var s=Node.prototype.addEventListener;"click"===i?s.call(t,i,e.hijacked||(e.hijacked=function(t){t.propagationStopped||e(t)}),o):s.call(t,i,e,o)}),"function"==typeof t.onclick&&(e=t.onclick,t.addEventListener("click",function(t){e(t)},!1),t.onclick=null))}function photoClip(t,i){function e(t){if(t.length){var i=t[0];if(!/image\/\w+/.test(i.type))return alert("图片格式不正确，请选择正确格式的图片文件！"),!1;var e=new FileReader;e.onprogress=function(t){console.log((t.loaded/t.total*100).toFixed()+"%")},e.onload=function(t){var i=t.total/1024;if(i>1024){var e=1024/i,o=$("<img>").hide();o.load(function(){var t=this.naturalWidth;o.appendTo(document.body);var i=this.naturalHeight;o.remove(),delete o[0],o=null;var s=0;t==i&&(s=90);var n=v(this,e,s,E);S(n)}),o.attr("src",this.result)}else S(this.result)},e.onerror=function(t){alert("图片加载失败"),z.call(this,t)},e.readAsDataURL(i),k.call(e,i)}}function o(){D=!0,L.append(this),u.call(this,P,function(){C=this.naturalWidth,M=this.naturalHeight}),u(A,function(){n()}),_.call(this,this.src)}function s(){var t={zoom:!0,scrollX:!0,scrollY:!0,freeScroll:!0,mouseWheel:!0,wheelAction:"zoom"};F=new IScroll(H[0],t),F.on("scrollStart",function(){})}function n(){q=0,V=0,U=0,L.css({width:C,height:M}),x(L,q,V,U),g(C,M),F.zoom(F.options.zoomStart),r(C,M);var t=.5*(T-C*F.options.zoomStart),i=.5*(w-M*F.options.zoomStart);F.scrollTo(t,i)}function r(t,i){A.css({width:t,height:i}),H.append(A),F.refresh()}function a(t,i){if(!Z){Z=!0;var e;e=i?d(A,i.x,i.y):p(A,H,.5*T,.5*w);var o,s,n=m(U,e),a=n.x,l=n.y,h=0,c=0,u=0,f=0,v=U+t;90==v||-270==v?(h=a+l,c=l-a,v>U?(u=M-a-l,f=a-l):U>v&&(u=M-l-(C-a),f=a+l-M),o=M,s=C):180==v||-180==v?(h=2*a,c=2*l,v>U?(u=C-a-(M-l),f=M-(a+l)):U>v&&(u=C-(a+l),f=M-l-(C-a)),o=C,s=M):270==v||-90==v?(h=a-l,c=a+l,v>U?(u=a+l-C,f=C-a-(M-l)):U>v&&(u=l-a,f=C-a-l),o=M,s=C):0!=v&&360!=v&&-360!=v||(h=0,c=0,v>U?(u=a-l,f=a+l-C):U>v&&(u=a+l-M,f=l-a),o=C,s=M),0==U?(q=0,V=0):90==U||-270==U?(q-=a+l,V-=l-a):180==U||-180==U?(q-=2*a,V-=2*l):270!=U&&-90!=U||(q-=a-l,V-=a+l),q=q.toFixed(2)-0,V=V.toFixed(2)-0,x(L,q,V,U,a,l),b(L,q,V,v,200,function(){Z=!1,U=v%360,q+=h+u,V+=c+f,q=q.toFixed(2)-0,V=V.toFixed(2)-0,x(L,q,V,U),F.scrollTo(F.x-u*F.scale,F.y-f*F.scale),g(o,s),F.scale<F.options.zoomMin&&F.zoom(F.options.zoomMin),r(o,s)})}}function l(){O=document.createElement("canvas"),O.width=T,O.height=w}function h(t){if(!D)return void alert("亲，当前没有图片可以裁剪!");var i=p(A,H),e=F.scale,o=O.getContext("2d");o.clearRect(0,0,O.width,O.height),o.save(),X?o.scale(e,e):(O.width=T/e,O.height=w/e),o.translate(q-i.x/e,V-i.y/e),o.rotate(U*Math.PI/180),o.drawImage(P[0],0,0),o.restore();var s=O.toDataURL(E,1);return s}function c(){u(I,function(){B=I.width(),R=I.height()})}function p(t,i,e,o){e=e||0,o=o||0;var s,n;return u(t,function(){s=t.offset()}),u(i,function(){n=i.offset()}),{x:n.left-s.left+e,y:n.top-s.top+o}}function d(t,i,e){i=i||0,e=e||0;var o;return u(t,function(){o=t.offset()}),{x:i+N.scrollLeft()-o.left,y:e+N.scrollTop()-o.top}}function u(t,i){var e=$();$.each(t,function(t,i){for(var o,s=$(i),n=s.parents().andSelf().filter(":hidden"),t=0;t<n.length&&s.is(":hidden");t++)o=n.eq(t),"none"==o.css("display")&&(e=e.add(o.show()))}),"function"==typeof i&&i.call(this),e.hide()}function m(t,i){var e=F.scale,o={};return 0==t?(o.x=i.x/e,o.y=i.y/e):90==t||-270==t?(o.x=i.y/e,o.y=M-i.x/e):180==t||-180==t?(o.x=C-i.x/e,o.y=M-i.y/e):270!=t&&-90!=t||(o.x=C-i.y/e,o.y=i.x/e),o}function f(t,i,e,o){var s=t/e,n=i/o;return s>n?s:n}function g(t,i){F.options.zoomMin=f(T,w,t,i),F.options.zoomMax=Math.max(1,F.options.zoomMin),F.options.zoomStart=Math.min(F.options.zoomMax,f(B,R,t,i))}function v(t,i,e,o){i=i||.8,e=e||0;var s=o||"image/jpeg",n=t.naturalWidth,r=t.naturalHeight,a=Math.max(n,r);if(a>1024){var l=Math.min(n,r);l=l/a*1024,a=1024,n>r?(n=a,r=l):(n=l,r=a)}var h=document.createElement("canvas"),c=h.getContext("2d");e?(h.width=r,h.height=n,c.translate(r,0),c.rotate(e*Math.PI/180)):(h.width=n,h.height=r),c.drawImage(t,0,0,n,r);var p=h.toDataURL(s,i||.8);return p}function S(t){P&&P.length&&(P.remove(),delete P[0]),P=$("<img>").css({"user-select":"none","pointer-events":"none"}),P.load(o),P.attr("src",t)}function x(t,i,e,o,s,n){s=s||0,n=n||0;var r={};r[prefix+"transform"]="translateZ(0) translate("+i+"px,"+e+"px) rotate("+o+"deg)",r[prefix+"transform-origin"]=s+"px "+n+"px",t.css(r)}function b(t,i,e,o,s,n){t.css(prefix+"transform"),t.css(prefix+"transition",prefix+"transform "+s+"ms"),t.one(transitionEnd,function(){t.css(prefix+"transition",""),n.call(this)}),t.css(prefix+"transform","translateZ(0) translate("+i+"px,"+e+"px) rotate("+o+"deg)")}function y(){I=$(t).css({"user-select":"none",overflow:"hidden"}),"static"==I.css("position")&&I.css("position","relative"),H=$("<div class='photo-clip-view slides'>").css({position:"absolute",left:"50%",top:"50%",width:T,height:w,"margin-left":-T/2,"margin-top":-w/2}).appendTo(I),A=$("<div class='photo-clip-moveLayer'>").appendTo(H),L=$("<div class='photo-clip-rotateLayer'>").appendTo(A);var i=$("<div class='photo-clip-mask'>").css({position:"absolute",left:0,top:0,width:"100%",height:"100%","pointer-events":"none"}).appendTo(I);$("<div class='photo-clip-mask-left'>").css({position:"absolute",left:0,right:"50%",top:"50%",bottom:"50%",width:"auto",height:w,"margin-right":T/2,"margin-top":-w/2,"margin-bottom":-w/2,"background-color":"rgba(0,0,0,.5)"}).appendTo(i),$("<div class='photo-clip-mask-right'>").css({position:"absolute",left:"50%",right:0,top:"50%",bottom:"50%","margin-left":T/2,"margin-top":-w/2,"margin-bottom":-w/2,"background-color":"rgba(0,0,0,.5)"}).appendTo(i),$("<div class='photo-clip-mask-top'>").css({position:"absolute",left:0,right:0,top:0,bottom:"50%","margin-bottom":w/2,"background-color":"rgba(0,0,0,.5)"}).appendTo(i),$("<div class='photo-clip-mask-bottom'>").css({position:"absolute",left:0,right:0,top:"50%",bottom:0,"margin-top":w/2,"background-color":"rgba(0,0,0,.5)"}).appendTo(i),$("<div class='photo-clip-area'>").css({border:"1px dashed #ddd",position:"absolute",left:"50%",top:"50%",width:T,height:w,"margin-left":-T/2-1,"margin-top":-w/2-1}).appendTo(i)}var i=i||{},T=i.width||256,w=i.height||256,Y=i.file||"",E=i.outputType||"jpg",X=!1,k=i.loadStart||function(){},_=i.loadComplete||function(){},z=i.loadError||function(){};i.hasOwnProperty("strictSize")&&(X=opt.strictSize),"jpg"===E?E="image/jpeg":"png"===E&&(E="image/png");var P,C,M,D=!1,W=$(Y);W.attr("accept","image/*"),W.change(function(){e(this.files)});var I,H,A,L,O,F,B,R;y(),s(),l();var N=$(window);c(),N.resize(c);var Z,q,V,U;return{setImg:S,getImg:h,readFile:e,rotateBy:a,isLoad:function(){return D}}}var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);FastClick.prototype.needsClick=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(deviceIsIOS&&"file"===t.type||t.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(t.className)},FastClick.prototype.needsFocus=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},FastClick.prototype.sendClick=function(t,i){"use strict";var e,o;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),o=i.changedTouches[0],e=document.createEvent("MouseEvents"),e.initMouseEvent(this.determineEventType(t),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),e.forwardedTouchEvent=!0,t.dispatchEvent(e)},FastClick.prototype.determineEventType=function(t){"use strict";return deviceIsAndroid&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(t){"use strict";var i;deviceIsIOS&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type?(i=t.value.length,t.setSelectionRange(i,i)):t.focus()},FastClick.prototype.updateScrollParent=function(t){"use strict";var i,e;if(i=t.fastClickScrollParent,!i||!i.contains(t)){e=t;do{if(e.scrollHeight>e.offsetHeight){i=e,t.fastClickScrollParent=e;break}e=e.parentElement}while(e)}i&&(i.fastClickLastScrollTop=i.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(t){"use strict";return t.nodeType===Node.TEXT_NODE?t.parentNode:t},FastClick.prototype.onTouchStart=function(t){"use strict";var i,e,o;if(t.targetTouches.length>1)return!0;if(i=this.getTargetElementFromEventTarget(t.target),e=t.targetTouches[0],deviceIsIOS){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!deviceIsIOS4){if(e.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=e.identifier,this.updateScrollParent(i)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=i,this.touchStartX=e.pageX,this.touchStartY=e.pageY,t.timeStamp-this.lastClickTime<200&&t.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(t){"use strict";var i=t.changedTouches[0],e=this.touchBoundary;return Math.abs(i.pageX-this.touchStartX)>e||Math.abs(i.pageY-this.touchStartY)>e},FastClick.prototype.onTouchMove=function(t){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(t){"use strict";return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(t){"use strict";var i,e,o,s,n,r=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,e=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(n=t.changedTouches[0],r=document.elementFromPoint(n.pageX-window.pageXOffset,n.pageY-window.pageYOffset)||r,r.fastClickScrollParent=this.targetElement.fastClickScrollParent),o=r.tagName.toLowerCase(),"label"===o){if(i=this.findControl(r)){if(this.focus(r),deviceIsAndroid)return!1;r=i}}else if(this.needsFocus(r))return t.timeStamp-e>100||deviceIsIOS&&window.top!==window&&"input"===o?(this.targetElement=null,!1):(this.focus(r),this.sendClick(r,t),deviceIsIOS4&&"select"===o||(this.targetElement=null,t.preventDefault()),!1);return deviceIsIOS&&!deviceIsIOS4&&(s=r.fastClickScrollParent,s&&s.fastClickLastScrollTop!==s.scrollTop)?!0:(this.needsClick(r)||(t.preventDefault(),this.sendClick(r,t)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(t){"use strict";return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},FastClick.prototype.onClick=function(t){"use strict";var i;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(i=this.onMouse(t),i||(this.targetElement=null),i)},FastClick.prototype.destroy=function(){"use strict";var t=this.layer;deviceIsAndroid&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(t){"use strict";var i,e;if("undefined"==typeof window.ontouchstart)return!0;if(e=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid)return!0;if(i=document.querySelector("meta[name=viewport]")){if(-1!==i.content.indexOf("user-scalable=no"))return!0;if(e>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===t.style.msTouchAction},FastClick.attach=function(t){"use strict";return new FastClick(t)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,function(t,i,e){function o(t,o){this.wrapper="string"==typeof t?i.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={zoomMin:1,zoomMax:4,zoomStart:1,resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var s in o)this.options[s]=o[s];this.translateZ=this.options.HWCompositing&&a.hasPerspective?" translateZ(0)":"",this.options.useTransition=a.hasTransition&&this.options.useTransition,this.options.useTransform=a.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?a.ease[this.options.bounceEasing]||a.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this.scale=e.min(e.max(this.options.zoomStart,this.options.zoomMin),this.options.zoomMax),this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function s(t,e,o){var s=i.createElement("div"),n=i.createElement("div");return o===!0&&(s.style.cssText="position:absolute;z-index:9999",n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),n.className="iScrollIndicator","h"==t?(o===!0&&(s.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",n.style.height="100%"),s.className="iScrollHorizontalScrollbar"):(o===!0&&(s.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",n.style.width="100%"),s.className="iScrollVerticalScrollbar"),s.style.cssText+=";overflow:hidden",e||(s.style.pointerEvents="none"),s.appendChild(n),s}function n(e,o){this.wrapper="string"==typeof o.el?i.querySelector(o.el):o.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=e,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var s in o)this.options[s]=o[s];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(a.addEvent(this.indicator,"touchstart",this),a.addEvent(t,"touchend",this)),this.options.disablePointer||(a.addEvent(this.indicator,a.prefixPointerEvent("pointerdown"),this),a.addEvent(t,a.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(a.addEvent(this.indicator,"mousedown",this),a.addEvent(t,"mouseup",this))),this.options.fade&&(this.wrapperStyle[a.style.transform]=this.scroller.translateZ,this.wrapperStyle[a.style.transitionDuration]=a.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var r=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(i){t.setTimeout(i,1e3/60)},a=function(){function o(t){return r===!1?!1:""===r?t:r+t.charAt(0).toUpperCase()+t.substr(1)}var s={},n=i.createElement("div").style,r=function(){for(var t,i=["t","webkitT","MozT","msT","OT"],e=0,o=i.length;o>e;e++)if(t=i[e]+"ransform",t in n)return i[e].substr(0,i[e].length-1);return!1}();s.getTime=Date.now||function(){return(new Date).getTime()},s.extend=function(t,i){for(var e in i)t[e]=i[e]},s.addEvent=function(t,i,e,o){t.addEventListener(i,e,!!o)},s.removeEvent=function(t,i,e,o){t.removeEventListener(i,e,!!o)},s.prefixPointerEvent=function(i){return t.MSPointerEvent?"MSPointer"+i.charAt(9).toUpperCase()+i.substr(10):i},s.momentum=function(t,i,o,s,n,r){var a,l,h=t-i,c=e.abs(h)/o;return r=void 0===r?6e-4:r,a=t+c*c/(2*r)*(0>h?-1:1),l=c/r,s>a?(a=n?s-n/2.5*(c/8):s,h=e.abs(a-t),l=h/c):a>0&&(a=n?n/2.5*(c/8):0,h=e.abs(t)+a,l=h/c),{destination:e.round(a),duration:l}};var a=o("transform");return s.extend(s,{hasTransform:a!==!1,hasPerspective:o("perspective")in n,hasTouch:"ontouchstart"in t,hasPointer:t.PointerEvent||t.MSPointerEvent,hasTransition:o("transition")in n}),s.isBadAndroid=/Android /.test(t.navigator.appVersion)&&!/Chrome\/\d/.test(t.navigator.appVersion),s.extend(s.style={},{transform:a,transitionTimingFunction:o("transitionTimingFunction"),transitionDuration:o("transitionDuration"),transitionDelay:o("transitionDelay"),transformOrigin:o("transformOrigin")}),s.hasClass=function(t,i){var e=new RegExp("(^|\\s)"+i+"(\\s|$)");return e.test(t.className)},s.addClass=function(t,i){if(!s.hasClass(t,i)){var e=t.className.split(" ");e.push(i),t.className=e.join(" ")}},s.removeClass=function(t,i){if(s.hasClass(t,i)){var e=new RegExp("(^|\\s)"+i+"(\\s|$)","g");t.className=t.className.replace(e," ")}},s.offset=function(t){for(var i=-t.offsetLeft,e=-t.offsetTop;t=t.offsetParent;)i-=t.offsetLeft,e-=t.offsetTop;return{left:i,top:e}},s.preventDefaultException=function(t,i){for(var e in i)if(i[e].test(t[e]))return!0;return!1},s.extend(s.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),s.extend(s.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return e.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var i=4;return(t-=1)*t*((i+1)*t+i)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var i=.22,o=.4;return 0===t?0:1==t?1:o*e.pow(2,-10*t)*e.sin((t-i/4)*(2*e.PI)/i)+1}}}),s.tap=function(t,e){var o=i.createEvent("Event");o.initEvent(e,!0,!0),o.pageX=t.pageX,o.pageY=t.pageY,t.target.dispatchEvent(o)},s.click=function(t){var e,o=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(o.tagName)||(e=i.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,t.view,1,o.screenX,o.screenY,o.clientX,o.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),e._constructed=!0,o.dispatchEvent(e))},s}();o.prototype={version:"5.1.3",_init:function(){this._initEvents(),this.options.zoom&&this._initZoom(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if((1==a.eventType[t.type]||0===t.button)&&this.enabled&&(!this.initiated||a.eventType[t.type]===this.initiated)){!this.options.preventDefault||a.isBadAndroid||a.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var i,o=t.touches?t.touches[0]:t;this.initiated=a.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=a.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,i=this.getComputedPosition(),this._translate(e.round(i.x),e.round(i.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=o.pageX,this.pointY=o.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&a.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var i,o,s,n,r=t.touches?t.touches[0]:t,l=r.pageX-this.pointX,h=r.pageY-this.pointY,c=a.getTime();if(this.pointX=r.pageX,this.pointY=r.pageY,this.distX+=l,this.distY+=h,s=e.abs(this.distX),n=e.abs(this.distY),!(c-this.endTime>300&&10>s&&10>n)){if(this.directionLocked||this.options.freeScroll||(s>n+this.options.directionLockThreshold?this.directionLocked="h":n>=s+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);h=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}l=this.hasHorizontalScroll?l:0,h=this.hasVerticalScroll?h:0,i=this.x+l,o=this.y+h,(i>0||i<this.maxScrollX)&&(i=this.options.bounce?this.x+l/3:i>0?0:this.maxScrollX),(o>0||o<this.maxScrollY)&&(o=this.options.bounce?this.y+h/3:o>0?0:this.maxScrollY),this.directionX=l>0?-1:0>l?1:0,this.directionY=h>0?-1:0>h?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(i,o),c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y)}}},_end:function(t){if(this.enabled&&a.eventType[t.type]===this.initiated){this.options.preventDefault&&!a.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var i,o,s=(t.changedTouches?t.changedTouches[0]:t,a.getTime()-this.startTime),n=e.round(this.x),r=e.round(this.y),l=e.abs(n-this.startX),h=e.abs(r-this.startY),c=0,p="";if(this.isInTransition=0,this.initiated=0,this.endTime=a.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(n,r),!this.moved)return this.options.tap&&a.tap(t,this.options.tap),this.options.click&&a.click(t),void this._execEvent("scrollCancel");if(this._events.flick&&200>s&&100>l&&100>h)return void this._execEvent("flick");if(this.options.momentum&&300>s&&(i=this.hasHorizontalScroll?a.momentum(this.x,this.startX,s,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:n,duration:0},o=this.hasVerticalScroll?a.momentum(this.y,this.startY,s,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:r,duration:0},n=i.destination,r=o.destination,c=e.max(i.duration,o.duration),this.isInTransition=1),this.options.snap){var d=this._nearestSnap(n,r);this.currentPage=d,c=this.options.snapSpeed||e.max(e.max(e.min(e.abs(n-d.x),1e3),e.min(e.abs(r-d.y),1e3)),300),n=d.x,r=d.y,this.directionX=0,this.directionY=0,p=this.options.bounceEasing}return n!=this.x||r!=this.y?((n>0||n<this.maxScrollX||r>0||r<this.maxScrollY)&&(p=a.ease.quadratic),void this.scrollTo(n,r,c,p)):void this._execEvent("scrollEnd")}}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var i=this.x,e=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?i=0:this.x<this.maxScrollX&&(i=this.maxScrollX),!this.hasVerticalScroll||this.y>0?e=0:this.y<this.maxScrollY&&(e=this.maxScrollY),i==this.x&&e==this.y?!1:(this.scrollTo(i,e,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=e.round(this.scroller.offsetWidth*this.scale),this.scrollerHeight=e.round(this.scroller.offsetHeight*this.scale),this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=a.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition(this.options.bounceTime)},on:function(t,i){this._events[t]||(this._events[t]=[]),this._events[t].push(i)},off:function(t,i){if(this._events[t]){var e=this._events[t].indexOf(i);e>-1&&this._events[t].splice(e,1)}},_execEvent:function(t){if(this._events[t]){var i=0,e=this._events[t].length;if(e)for(;e>i;i++)this._events[t][i].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,i,e,o){t=this.x+t,i=this.y+i,e=e||0,this.scrollTo(t,i,e,o)},scrollTo:function(t,i,e,o){o=o||a.ease.circular,this.isInTransition=this.options.useTransition&&e>0,!e||this.options.useTransition&&o.style?(this._transitionTimingFunction(o.style),this._transitionTime(e),this._translate(t,i)):this._animate(t,i,e,o.fn)},scrollToElement:function(t,i,o,s,n){if(t=t.nodeType?t:this.scroller.querySelector(t)){var r=a.offset(t);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top,o===!0&&(o=e.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),s===!0&&(s=e.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),r.left-=o||0,r.top-=s||0,r.left=r.left>0?0:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=r.top>0?0:r.top<this.maxScrollY?this.maxScrollY:r.top,i=void 0===i||null===i||"auto"===i?e.max(e.abs(this.x-r.left),e.abs(this.y-r.top)):i,this.scrollTo(r.left,r.top,i,n)}},_transitionTime:function(t){if(t=t||0,this.scrollerStyle[a.style.transitionDuration]=t+"ms",!t&&a.isBadAndroid&&(this.scrollerStyle[a.style.transitionDuration]="0.001s"),this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].transitionTime(t)},_transitionTimingFunction:function(t){if(this.scrollerStyle[a.style.transitionTimingFunction]=t,this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].transitionTimingFunction(t)},_translate:function(t,i){if(this.options.useTransform?this.scrollerStyle[a.style.transform]="translate("+t+"px,"+i+"px) scale("+this.scale+") "+this.translateZ:(t=e.round(t),i=e.round(i),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=i+"px"),this.x=t,this.y=i,this.indicators)for(var o=this.indicators.length;o--;)this.indicators[o].updatePosition()},_initEvents:function(i){var e=i?a.removeEvent:a.addEvent,o=this.options.bindToWrapper?this.wrapper:t;e(t,"orientationchange",this),e(t,"resize",this),this.options.click&&e(this.wrapper,"click",this,!0),this.options.disableMouse||(e(this.wrapper,"mousedown",this),e(o,"mousemove",this),e(o,"mousecancel",this),e(o,"mouseup",this)),a.hasPointer&&!this.options.disablePointer&&(e(this.wrapper,a.prefixPointerEvent("pointerdown"),this),e(o,a.prefixPointerEvent("pointermove"),this),e(o,a.prefixPointerEvent("pointercancel"),this),e(o,a.prefixPointerEvent("pointerup"),this)),a.hasTouch&&!this.options.disableTouch&&(e(this.wrapper,"touchstart",this),e(o,"touchmove",this),e(o,"touchcancel",this),e(o,"touchend",this)),e(this.scroller,"transitionend",this),e(this.scroller,"webkitTransitionEnd",this),e(this.scroller,"oTransitionEnd",this),e(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var i,e,o=t.getComputedStyle(this.scroller,null);return this.options.useTransform?(o=o[a.style.transform].split(")")[0].split(", "),i=+(o[12]||o[4]),e=+(o[13]||o[5])):(i=+o.left.replace(/[^-\d.]/g,""),e=+o.top.replace(/[^-\d.]/g,"")),{x:i,y:e}},_initIndicators:function(){function t(t){for(var i=a.indicators.length;i--;)t.call(a.indicators[i])}var i,e=this.options.interactiveScrollbars,o="string"!=typeof this.options.scrollbars,r=[],a=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(i={el:s("v",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:o,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(i.el),r.push(i)),this.options.scrollX&&(i={el:s("h",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:o,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(i.el),r.push(i))),this.options.indicators&&(r=r.concat(this.options.indicators));for(var l=r.length;l--;)this.indicators.push(new n(this,r[l]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){t(function(){this.fade()})}),this.on("scrollCancel",function(){t(function(){this.fade()})}),this.on("scrollStart",function(){t(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){t(function(){this.fade(1,!0)})})),this.on("refresh",function(){t(function(){this.refresh()})}),this.on("destroy",function(){t(function(){this.destroy()}),delete this.indicators})},_initZoom:function(){this.scrollerStyle[a.style.transformOrigin]="0 0"},_zoomStart:function(t){var i=e.abs(t.touches[0].pageX-t.touches[1].pageX),o=e.abs(t.touches[0].pageY-t.touches[1].pageY);this.touchesDistanceStart=e.sqrt(i*i+o*o),this.startScale=this.scale,this.originX=e.abs(t.touches[0].pageX+t.touches[1].pageX)/2+this.wrapperOffset.left-this.x,this.originY=e.abs(t.touches[0].pageY+t.touches[1].pageY)/2+this.wrapperOffset.top-this.y,this._execEvent("zoomStart")},_zoom:function(t){if(this.enabled&&a.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var i,o,s,n=e.abs(t.touches[0].pageX-t.touches[1].pageX),r=e.abs(t.touches[0].pageY-t.touches[1].pageY),l=e.sqrt(n*n+r*r),h=1/this.touchesDistanceStart*l*this.startScale;this.scaled=!0,
h<this.options.zoomMin?h=.5*this.options.zoomMin*e.pow(2,h/this.options.zoomMin):h>this.options.zoomMax&&(h=2*this.options.zoomMax*e.pow(.5,this.options.zoomMax/h)),i=h/this.startScale,o=this.originX-this.originX*i+this.startX,s=this.originY-this.originY*i+this.startY,this.scale=h,this.scrollTo(o,s,0)}},_zoomEnd:function(t){if(this.enabled&&a.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var i,e,o;this.isInTransition=0,this.initiated=0,this.scale>this.options.zoomMax?this.scale=this.options.zoomMax:this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin),this.refresh(),o=this.scale/this.startScale,i=this.originX-this.originX*o+this.startX,e=this.originY-this.originY*o+this.startY,i>0?i=0:i<this.maxScrollX&&(i=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY),this.scrollTo(i,e,this.options.bounceTime),this.scaled=!1,this._execEvent("zoomEnd")}},zoom:function(t,i,e,o){if(t<this.options.zoomMin?t=this.options.zoomMin:t>this.options.zoomMax&&(t=this.options.zoomMax),t!=this.scale){var s=t/this.scale;i=void 0===i?this.wrapperWidth/2-this.wrapperOffset.left:i,e=void 0===e?this.wrapperHeight/2-this.wrapperOffset.top:e,o=void 0===o?300:o,i=i+this.wrapperOffset.left-this.x,e=e+this.wrapperOffset.top-this.y,i=i-i*s+this.x,e=e-e*s+this.y,this.scale=t,this.refresh(),i>0?i=0:i<this.maxScrollX&&(i=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY),this.scrollTo(i,e,o)}},_wheelZoom:function(t){var i,o,s=this;if(clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){s._execEvent("zoomEnd")},400),"deltaY"in t)i=-t.deltaY/e.abs(t.deltaY);else if("wheelDeltaY"in t)i=t.wheelDeltaY/e.abs(t.wheelDeltaY);else if("wheelDelta"in t)i=t.wheelDelta/e.abs(t.wheelDelta);else{if(!("detail"in t))return;i=-t.detail/e.abs(t.detail)}isNaN(i)&&(i=0),o=this.scale+.01*i,this.zoom(o,t.pageX,t.pageY,0),t.preventDefault(),t.stopPropagation()},_initWheel:function(){a.addEvent(this.wrapper,"wheel",this),a.addEvent(this.wrapper,"mousewheel",this),a.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){a.removeEvent(this.wrapper,"wheel",this),a.removeEvent(this.wrapper,"mousewheel",this),a.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(t){if(this.enabled){t.preventDefault(),t.stopPropagation();var i,o,s,n,r=this;if(void 0===this.wheelTimeout&&r._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){r._execEvent("scrollEnd"),r.wheelTimeout=void 0},400),"deltaX"in t)1===t.deltaMode?(i=-t.deltaX*this.options.mouseWheelSpeed,o=-t.deltaY*this.options.mouseWheelSpeed):(i=-t.deltaX,o=-t.deltaY);else if("wheelDeltaX"in t)i=t.wheelDeltaX/120*this.options.mouseWheelSpeed,o=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)i=o=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;i=o=-t.detail/3*this.options.mouseWheelSpeed}if(i*=this.options.invertWheelDirection,o*=this.options.invertWheelDirection,this.hasVerticalScroll||(i=o,o=0),this.options.snap)return s=this.currentPage.pageX,n=this.currentPage.pageY,i>0?s--:0>i&&s++,o>0?n--:0>o&&n++,void this.goToPage(s,n);s=this.x+e.round(this.hasHorizontalScroll?i:0),n=this.y+e.round(this.hasVerticalScroll?o:0),s>0?s=0:s<this.maxScrollX&&(s=this.maxScrollX),n>0?n=0:n<this.maxScrollY&&(n=this.maxScrollY),this.scrollTo(s,n,0)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,i,o,s,n,r,a=0,l=0,h=0,c=this.options.snapStepX||this.wrapperWidth,p=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(o=e.round(c/2),s=e.round(p/2);h>-this.scrollerWidth;){for(this.pages[a]=[],t=0,n=0;n>-this.scrollerHeight;)this.pages[a][t]={x:e.max(h,this.maxScrollX),y:e.max(n,this.maxScrollY),width:c,height:p,cx:h-o,cy:n-s},n-=p,t++;h-=c,a++}else for(r=this.options.snap,t=r.length,i=-1;t>a;a++)(0===a||r[a].offsetLeft<=r[a-1].offsetLeft)&&(l=0,i++),this.pages[l]||(this.pages[l]=[]),h=e.max(-r[a].offsetLeft,this.maxScrollX),n=e.max(-r[a].offsetTop,this.maxScrollY),o=h-e.round(r[a].offsetWidth/2),s=n-e.round(r[a].offsetHeight/2),this.pages[l][i]={x:h,y:n,width:r[a].offsetWidth,height:r[a].offsetHeight,cx:o,cy:s},h>this.maxScrollX&&l++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=e.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=e.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||e.max(e.max(e.min(e.abs(this.x-this.startX),1e3),e.min(e.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,i){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var o=0,s=this.pages.length,n=0;if(e.abs(t-this.absStartX)<this.snapThresholdX&&e.abs(i-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),i>0?i=0:i<this.maxScrollY&&(i=this.maxScrollY);s>o;o++)if(t>=this.pages[o][0].cx){t=this.pages[o][0].x;break}for(s=this.pages[o].length;s>n;n++)if(i>=this.pages[0][n].cy){i=this.pages[0][n].y;break}return o==this.currentPage.pageX&&(o+=this.directionX,0>o?o=0:o>=this.pages.length&&(o=this.pages.length-1),t=this.pages[o][0].x),n==this.currentPage.pageY&&(n+=this.directionY,0>n?n=0:n>=this.pages[0].length&&(n=this.pages[0].length-1),i=this.pages[0][n].y),{x:t,y:i,pageX:o,pageY:n}},goToPage:function(t,i,o,s){s=s||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:0>t&&(t=0),i>=this.pages[t].length?i=this.pages[t].length-1:0>i&&(i=0);var n=this.pages[t][i].x,r=this.pages[t][i].y;o=void 0===o?this.options.snapSpeed||e.max(e.max(e.min(e.abs(n-this.x),1e3),e.min(e.abs(r-this.y),1e3)),300):o,this.currentPage={x:n,y:r,pageX:t,pageY:i},this.scrollTo(n,r,o,s)},next:function(t,i){var e=this.currentPage.pageX,o=this.currentPage.pageY;e++,e>=this.pages.length&&this.hasVerticalScroll&&(e=0,o++),this.goToPage(e,o,t,i)},prev:function(t,i){var e=this.currentPage.pageX,o=this.currentPage.pageY;e--,0>e&&this.hasVerticalScroll&&(e=0,o--),this.goToPage(e,o,t,i)},_initKeys:function(i){var e,o={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(e in this.options.keyBindings)"string"==typeof this.options.keyBindings[e]&&(this.options.keyBindings[e]=this.options.keyBindings[e].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(e in o)this.options.keyBindings[e]=this.options.keyBindings[e]||o[e];a.addEvent(t,"keydown",this),this.on("destroy",function(){a.removeEvent(t,"keydown",this)})},_key:function(t){if(this.enabled){var i,o=this.options.snap,s=o?this.currentPage.pageX:this.x,n=o?this.currentPage.pageY:this.y,r=a.getTime(),l=this.keyTime||0,h=.25;switch(this.options.useTransition&&this.isInTransition&&(i=this.getComputedPosition(),this._translate(e.round(i.x),e.round(i.y)),this.isInTransition=!1),this.keyAcceleration=200>r-l?e.min(this.keyAcceleration+h,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?s+=o?1:this.wrapperWidth:n+=o?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?s-=o?1:this.wrapperWidth:n-=o?1:this.wrapperHeight;break;case this.options.keyBindings.end:s=o?this.pages.length-1:this.maxScrollX,n=o?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:s=0,n=0;break;case this.options.keyBindings.left:s+=o?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:n+=o?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:s-=o?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:n-=o?1:5+this.keyAcceleration>>0;break;default:return}if(o)return void this.goToPage(s,n);s>0?(s=0,this.keyAcceleration=0):s<this.maxScrollX&&(s=this.maxScrollX,this.keyAcceleration=0),n>0?(n=0,this.keyAcceleration=0):n<this.maxScrollY&&(n=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(s,n,0),this.keyTime=r}},_animate:function(t,i,e,o){function s(){var d,u,m,f=a.getTime();return f>=p?(n.isAnimating=!1,n._translate(t,i),void(n.resetPosition(n.options.bounceTime)||n._execEvent("scrollEnd"))):(f=(f-c)/e,m=o(f),d=(t-l)*m+l,u=(i-h)*m+h,n._translate(d,u),void(n.isAnimating&&r(s)))}var n=this,l=this.x,h=this.y,c=a.getTime(),p=c+e;this.isAnimating=!0,s()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t),this.options.zoom&&t.touches&&t.touches.length>1&&this._zoomStart(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":if(this.options.zoom&&t.touches&&t.touches[1])return void this._zoom(t);this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":if(this.scaled)return void this._zoomEnd(t);this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":if("zoom"==this.options.wheelAction)return void this._wheelZoom(t);this._wheel(t);break;case"keydown":this._key(t)}}},n.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},destroy:function(){this.options.interactive&&(a.removeEvent(this.indicator,"touchstart",this),a.removeEvent(this.indicator,a.prefixPointerEvent("pointerdown"),this),a.removeEvent(this.indicator,"mousedown",this),a.removeEvent(t,"touchmove",this),a.removeEvent(t,a.prefixPointerEvent("pointermove"),this),a.removeEvent(t,"mousemove",this),a.removeEvent(t,"touchend",this),a.removeEvent(t,a.prefixPointerEvent("pointerup"),this),a.removeEvent(t,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(i){var e=i.touches?i.touches[0]:i;i.preventDefault(),i.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=e.pageX,this.lastPointY=e.pageY,this.startTime=a.getTime(),this.options.disableTouch||a.addEvent(t,"touchmove",this),this.options.disablePointer||a.addEvent(t,a.prefixPointerEvent("pointermove"),this),this.options.disableMouse||a.addEvent(t,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(t){var i,e,o,s,n=t.touches?t.touches[0]:t;a.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,i=n.pageX-this.lastPointX,this.lastPointX=n.pageX,e=n.pageY-this.lastPointY,this.lastPointY=n.pageY,o=this.x+i,s=this.y+e,this._pos(o,s),t.preventDefault(),t.stopPropagation()},_end:function(i){if(this.initiated){if(this.initiated=!1,i.preventDefault(),i.stopPropagation(),a.removeEvent(t,"touchmove",this),a.removeEvent(t,a.prefixPointerEvent("pointermove"),this),a.removeEvent(t,"mousemove",this),this.scroller.options.snap){var o=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),s=this.options.snapSpeed||e.max(e.max(e.min(e.abs(this.scroller.x-o.x),1e3),e.min(e.abs(this.scroller.y-o.y),1e3)),300);this.scroller.x==o.x&&this.scroller.y==o.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=o,this.scroller.scrollTo(o.x,o.y,s,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(t){t=t||0,this.indicatorStyle[a.style.transitionDuration]=t+"ms",!t&&a.isBadAndroid&&(this.indicatorStyle[a.style.transitionDuration]="0.001s")},transitionTimingFunction:function(t){this.indicatorStyle[a.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(a.addClass(this.wrapper,"iScrollBothScrollbars"),a.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(a.removeClass(this.wrapper,"iScrollBothScrollbars"),a.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=e.max(e.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=e.max(e.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var t=this.options.listenX&&e.round(this.sizeRatioX*this.scroller.x)||0,i=this.options.listenY&&e.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(t<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=e.max(this.indicatorWidth+t,8),this.indicatorStyle.width=this.width+"px"),t=this.minBoundaryX):t>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=e.max(this.indicatorWidth-(t-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",t=this.maxPosX+this.indicatorWidth-this.width):t=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),i<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=e.max(this.indicatorHeight+3*i,8),this.indicatorStyle.height=this.height+"px"),i=this.minBoundaryY):i>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=e.max(this.indicatorHeight-3*(i-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",i=this.maxPosY+this.indicatorHeight-this.height):i=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=t,this.y=i,this.scroller.options.useTransform?this.indicatorStyle[a.style.transform]="translate("+t+"px,"+i+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=i+"px")},_pos:function(t,i){0>t?t=0:t>this.maxPosX&&(t=this.maxPosX),0>i?i=0:i>this.maxPosY&&(i=this.maxPosY),t=this.options.listenX?e.round(t/this.sizeRatioX):this.scroller.x,i=this.options.listenY?e.round(i/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,i)},fade:function(t,i){if(!i||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var e=t?250:500,o=t?0:300;t=t?"1":"0",this.wrapperStyle[a.style.transitionDuration]=e+"ms",this.fadeTimeout=setTimeout(function(t){this.wrapperStyle.opacity=t,this.visible=+t}.bind(this,t),o)}}},o.utils=a,"undefined"!=typeof module&&module.exports?module.exports=o:t.IScroll=o}(window,document,Math),function(t,i){function e(t){return""===n?t:(t=t.charAt(0).toUpperCase()+t.substr(1),n+t)}var o=Math,s=i.createElement("div").style,n=function(){for(var t,i="t,webkitT,MozT,msT,OT".split(","),e=0,o=i.length;o>e;e++)if(t=i[e]+"ransform",t in s)return i[e].substr(0,i[e].length-1);return!1}(),r=n?"-"+n.toLowerCase()+"-":"",a=e("transform"),l=e("transitionProperty"),h=e("transitionDuration"),c=e("transformOrigin"),p=e("transitionTimingFunction"),d=e("transitionDelay"),u=/android/gi.test(navigator.appVersion),m=/iphone|ipad/gi.test(navigator.appVersion),f=/hp-tablet/gi.test(navigator.appVersion),g=e("perspective")in s,v="ontouchstart"in t&&!f,S=n!==!1,x=e("transition")in s,b="onorientationchange"in t?"orientationchange":"resize",y=v?"touchstart":"mousedown",T=v?"touchmove":"mousemove",w=v?"touchend":"mouseup",Y=v?"touchcancel":"mouseup",E=function(){if(n===!1)return!1;var t={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return t[n]}(),X=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){return setTimeout(t,1)}}(),k=function(){return t.cancelRequestAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.oCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||clearTimeout}(),_=g?" translateZ(0)":"",z=function(e,o){var s,n=this;n.wrapper="object"==typeof e?e:i.getElementById(e),n.wrapper.style.overflow="hidden",n.scroller=n.wrapper.children[0],n.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:u,hideScrollbar:m,fadeScrollbar:m&&g,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(t){t.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(s in o)n.options[s]=o[s];n.x=n.options.x,n.y=n.options.y,n.options.useTransform=S&&n.options.useTransform,n.options.hScrollbar=n.options.hScroll&&n.options.hScrollbar,n.options.vScrollbar=n.options.vScroll&&n.options.vScrollbar,n.options.zoom=n.options.useTransform&&n.options.zoom,n.options.useTransition=x&&n.options.useTransition,n.options.zoom&&u&&(_=""),n.scroller.style[l]=n.options.useTransform?r+"transform":"top left",n.scroller.style[h]="0",n.scroller.style[c]="0 0",n.options.useTransition&&(n.scroller.style[p]="cubic-bezier(0.33,0.66,0.66,1)"),n.options.useTransform?n.scroller.style[a]="translate("+n.x+"px,"+n.y+"px)"+_:n.scroller.style.cssText+=";position:absolute;top:"+n.y+"px;left:"+n.x+"px",n.options.useTransition&&(n.options.fixedScrollbar=!0),n.refresh(),n._bind(b,t),n._bind(y),v||"none"!=n.options.wheelAction&&(n._bind("DOMMouseScroll"),n._bind("mousewheel")),n.options.checkDOMChanges&&(n.checkDOMTime=setInterval(function(){n._checkDOMChanges()},500))};z.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(t){var i=this;switch(t.type){case y:if(!v&&0!==t.button)return;i._start(t);break;case T:i._move(t);break;case w:case Y:i._end(t);break;case b:i._resize();break;case"DOMMouseScroll":case"mousewheel":i._wheel(t);break;case E:i._transitionEnd(t)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(t){var e,s=this;return s[t+"Scrollbar"]?(s[t+"ScrollbarWrapper"]||(e=i.createElement("div"),s.options.scrollbarClass?e.className=s.options.scrollbarClass+t.toUpperCase():e.style.cssText="position:absolute;z-index:100;"+("h"==t?"height:7px;bottom:1px;left:2px;right:"+(s.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(s.hScrollbar?"7":"2")+"px;top:2px;right:1px"),e.style.cssText+=";pointer-events:none;"+r+"transition-property:opacity;"+r+"transition-duration:"+(s.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(s.options.hideScrollbar?"0":"1"),s.wrapper.appendChild(e),s[t+"ScrollbarWrapper"]=e,e=i.createElement("div"),s.options.scrollbarClass||(e.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+r+"background-clip:padding-box;"+r+"box-sizing:border-box;"+("h"==t?"height:100%":"width:100%")+";"+r+"border-radius:3px;border-radius:3px"),e.style.cssText+=";pointer-events:none;"+r+"transition-property:"+r+"transform;"+r+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+r+"transition-duration:0;"+r+"transform: translate(0,0)"+_,s.options.useTransition&&(e.style.cssText+=";"+r+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),s[t+"ScrollbarWrapper"].appendChild(e),s[t+"ScrollbarIndicator"]=e),"h"==t?(s.hScrollbarSize=s.hScrollbarWrapper.clientWidth,s.hScrollbarIndicatorSize=o.max(o.round(s.hScrollbarSize*s.hScrollbarSize/s.scrollerW),8),s.hScrollbarIndicator.style.width=s.hScrollbarIndicatorSize+"px",s.hScrollbarMaxScroll=s.hScrollbarSize-s.hScrollbarIndicatorSize,s.hScrollbarProp=s.hScrollbarMaxScroll/s.maxScrollX):(s.vScrollbarSize=s.vScrollbarWrapper.clientHeight,s.vScrollbarIndicatorSize=o.max(o.round(s.vScrollbarSize*s.vScrollbarSize/s.scrollerH),8),s.vScrollbarIndicator.style.height=s.vScrollbarIndicatorSize+"px",s.vScrollbarMaxScroll=s.vScrollbarSize-s.vScrollbarIndicatorSize,s.vScrollbarProp=s.vScrollbarMaxScroll/s.maxScrollY),void s._scrollbarPos(t,!0)):void(s[t+"ScrollbarWrapper"]&&(S&&(s[t+"ScrollbarIndicator"].style[a]=""),s[t+"ScrollbarWrapper"].parentNode.removeChild(s[t+"ScrollbarWrapper"]),s[t+"ScrollbarWrapper"]=null,s[t+"ScrollbarIndicator"]=null))},_resize:function(){var t=this;setTimeout(function(){t.refresh()},u?200:0)},_pos:function(t,i){this.zoomed||(t=this.hScroll?t:0,i=this.vScroll?i:0,this.options.useTransform?this.scroller.style[a]="translate("+t+"px,"+i+"px) scale("+this.scale+")"+_:(t=o.round(t),i=o.round(i),this.scroller.style.left=t+"px",this.scroller.style.top=i+"px"),this.x=t,this.y=i,this.options.onMove&&this.options.onMove(this),this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(t,i){var e,s=this,n="h"==t?s.x:s.y;s[t+"Scrollbar"]&&(n=s[t+"ScrollbarProp"]*n,0>n?(s.options.fixedScrollbar||(e=s[t+"ScrollbarIndicatorSize"]+o.round(3*n),8>e&&(e=8),s[t+"ScrollbarIndicator"].style["h"==t?"width":"height"]=e+"px"),n=0):n>s[t+"ScrollbarMaxScroll"]&&(s.options.fixedScrollbar?n=s[t+"ScrollbarMaxScroll"]:(e=s[t+"ScrollbarIndicatorSize"]-o.round(3*(n-s[t+"ScrollbarMaxScroll"])),8>e&&(e=8),s[t+"ScrollbarIndicator"].style["h"==t?"width":"height"]=e+"px",n=s[t+"ScrollbarMaxScroll"]+(s[t+"ScrollbarIndicatorSize"]-e))),s[t+"ScrollbarWrapper"].style[d]="0",s[t+"ScrollbarWrapper"].style.opacity=i&&s.options.hideScrollbar?"0":"1",s[t+"ScrollbarIndicator"].style[a]="translate("+("h"==t?n+"px,0)":"0,"+n+"px)")+_)},_start:function(i){var e,s,n,r,l,h=this,c=v?i.touches[0]:i;h.enabled&&(h.options.onBeforeScrollStart&&h.options.onBeforeScrollStart.call(h,i),(h.options.useTransition||h.options.zoom)&&h._transitionTime(0),h.moved=!1,h.animating=!1,h.zoomed=!1,h.distX=0,h.distY=0,h.absDistX=0,h.absDistY=0,h.dirX=0,h.dirY=0,h.options.zoom&&v&&i.touches.length>1&&(r=o.abs(i.touches[0].pageX-i.touches[1].pageX),l=o.abs(i.touches[0].pageY-i.touches[1].pageY),h.touchesDistStart=o.sqrt(r*r+l*l),h.originX=o.abs(i.touches[0].pageX+i.touches[1].pageX-2*h.wrapperOffsetLeft)/2-h.x,h.originY=o.abs(i.touches[0].pageY+i.touches[1].pageY-2*h.wrapperOffsetTop)/2-h.y,h.options.onZoomStart&&h.options.onZoomStart.call(h,i)),h.options.momentum&&(h.options.useTransform?(e=getComputedStyle(h.scroller,null)[a].replace(/[^0-9\-.,]/g,"").split(","),s=+(e[12]||e[4]),n=+(e[13]||e[5])):(s=+getComputedStyle(h.scroller,null).left.replace(/[^0-9-]/g,""),n=+getComputedStyle(h.scroller,null).top.replace(/[^0-9-]/g,"")),s==h.x&&n==h.y||(h.options.useTransition?h._unbind(E):k(h.aniTime),h.steps=[],h._pos(s,n),h.options.onScrollEnd&&h.options.onScrollEnd.call(h))),h.absStartX=h.x,h.absStartY=h.y,h.startX=h.x,h.startY=h.y,h.pointX=c.pageX,h.pointY=c.pageY,h.startTime=i.timeStamp||Date.now(),h.options.onScrollStart&&h.options.onScrollStart.call(h,i),h._bind(T,t),h._bind(w,t),h._bind(Y,t))},_move:function(t){var i=this;if(!i.options.onBeforeScrollMove||!i.options.onBeforeScrollMove.call(i,t)){var e,s,n,r=v?t.touches[0]:t,l=r.pageX-i.pointX,h=r.pageY-i.pointY,c=i.x+l,p=i.y+h,d=t.timeStamp||Date.now();if(i.options.zoom&&v&&t.touches.length>1)return e=o.abs(t.touches[0].pageX-t.touches[1].pageX),s=o.abs(t.touches[0].pageY-t.touches[1].pageY),i.touchesDist=o.sqrt(e*e+s*s),i.zoomed=!0,n=1/i.touchesDistStart*i.touchesDist*this.scale,n<i.options.zoomMin?n=.5*i.options.zoomMin*Math.pow(2,n/i.options.zoomMin):n>i.options.zoomMax&&(n=2*i.options.zoomMax*Math.pow(.5,i.options.zoomMax/n)),i.lastScale=n/this.scale,c=this.originX-this.originX*i.lastScale+this.x,p=this.originY-this.originY*i.lastScale+this.y,this.scroller.style[a]="translate("+c+"px,"+p+"px) scale("+n+")"+_,void(i.options.onZoom&&i.options.onZoom.call(i,t));i.pointX=r.pageX,i.pointY=r.pageY,(c>0||c<i.maxScrollX)&&(c=i.options.bounce?i.x+l/2:c>=0||i.maxScrollX>=0?0:i.maxScrollX),(p>i.minScrollY||p<i.maxScrollY)&&(p=i.options.bounce?i.y+h/2:p>=i.minScrollY||i.maxScrollY>=0?i.minScrollY:i.maxScrollY),i.distX+=l,i.distY+=h,i.absDistX=o.abs(i.distX),i.absDistY=o.abs(i.distY),i.absDistX<6&&i.absDistY<6||(i.options.lockDirection&&(i.absDistX>i.absDistY+5?(p=i.y,h=0):i.absDistY>i.absDistX+5&&(c=i.x,l=0)),i.moved=!0,i._pos(c,p),i.dirX=l>0?-1:0>l?1:0,i.dirY=h>0?-1:0>h?1:0,d-i.startTime>300&&(i.startTime=d,i.startX=i.x,i.startY=i.y),i.options.onScrollMove&&i.options.onScrollMove.call(i,t))}},_end:function(e){if(!v||0===e.touches.length){var s,n,r,l,c,p,d,u=this,m=v?e.changedTouches[0]:e,f={dist:0,time:0},g={dist:0,time:0},S=(e.timeStamp||Date.now())-u.startTime,x=u.x,b=u.y;if(u._unbind(T,t),u._unbind(w,t),u._unbind(Y,t),u.options.onBeforeScrollEnd&&u.options.onBeforeScrollEnd.call(u,e),u.zoomed)return d=u.scale*u.lastScale,d=Math.max(u.options.zoomMin,d),d=Math.min(u.options.zoomMax,d),u.lastScale=d/u.scale,u.scale=d,u.x=u.originX-u.originX*u.lastScale+u.x,u.y=u.originY-u.originY*u.lastScale+u.y,u.scroller.style[h]="200ms",u.scroller.style[a]="translate("+u.x+"px,"+u.y+"px) scale("+u.scale+")"+_,u.zoomed=!1,u.refresh(),void(u.options.onZoomEnd&&u.options.onZoomEnd.call(u,e));if(!u.moved)return v&&(u.doubleTapTimer&&u.options.zoom?(clearTimeout(u.doubleTapTimer),u.doubleTapTimer=null,u.options.onZoomStart&&u.options.onZoomStart.call(u,e),u.zoom(u.pointX,u.pointY,1==u.scale?u.options.doubleTapZoom:1),u.options.onZoomEnd&&setTimeout(function(){u.options.onZoomEnd.call(u,e)},200)):this.options.handleClick&&(u.doubleTapTimer=setTimeout(function(){for(u.doubleTapTimer=null,s=m.target;1!=s.nodeType;)s=s.parentNode;"SELECT"!=s.tagName&&"INPUT"!=s.tagName&&"TEXTAREA"!=s.tagName&&(n=i.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!0,e.view,1,m.screenX,m.screenY,m.clientX,m.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),n._fake=!0,s.dispatchEvent(n))},u.options.zoom?250:0))),u._resetPos(400),void(u.options.onTouchEnd&&u.options.onTouchEnd.call(u,e));if(300>S&&u.options.momentum&&(f=x?u._momentum(x-u.startX,S,-u.x,u.scrollerW-u.wrapperW+u.x,u.options.bounce?u.wrapperW:0):f,g=b?u._momentum(b-u.startY,S,-u.y,u.maxScrollY<0?u.scrollerH-u.wrapperH+u.y-u.minScrollY:0,u.options.bounce?u.wrapperH:0):g,x=u.x+f.dist,b=u.y+g.dist,(u.x>0&&x>0||u.x<u.maxScrollX&&x<u.maxScrollX)&&(f={dist:0,time:0}),(u.y>u.minScrollY&&b>u.minScrollY||u.y<u.maxScrollY&&b<u.maxScrollY)&&(g={dist:0,time:0})),f.dist||g.dist)return c=o.max(o.max(f.time,g.time),10),u.options.snap&&(r=x-u.absStartX,l=b-u.absStartY,o.abs(r)<u.options.snapThreshold&&o.abs(l)<u.options.snapThreshold?u.scrollTo(u.absStartX,u.absStartY,200):(p=u._snap(x,b),x=p.x,b=p.y,c=o.max(p.time,c))),u.scrollTo(o.round(x),o.round(b),c),void(u.options.onTouchEnd&&u.options.onTouchEnd.call(u,e));if(u.options.snap)return r=x-u.absStartX,l=b-u.absStartY,o.abs(r)<u.options.snapThreshold&&o.abs(l)<u.options.snapThreshold?u.scrollTo(u.absStartX,u.absStartY,200):(p=u._snap(u.x,u.y),p.x==u.x&&p.y==u.y||u.scrollTo(p.x,p.y,p.time)),void(u.options.onTouchEnd&&u.options.onTouchEnd.call(u,e));u._resetPos(200),u.options.onTouchEnd&&u.options.onTouchEnd.call(u,e)}},_resetPos:function(t){var i=this,e=i.x>=0?0:i.x<i.maxScrollX?i.maxScrollX:i.x,o=i.y>=i.minScrollY||i.maxScrollY>0?i.minScrollY:i.y<i.maxScrollY?i.maxScrollY:i.y;return e==i.x&&o==i.y?(i.moved&&(i.moved=!1,i.options.onScrollEnd&&i.options.onScrollEnd.call(i)),i.hScrollbar&&i.options.hideScrollbar&&("webkit"==n&&(i.hScrollbarWrapper.style[d]="300ms"),i.hScrollbarWrapper.style.opacity="0"),void(i.vScrollbar&&i.options.hideScrollbar&&("webkit"==n&&(i.vScrollbarWrapper.style[d]="300ms"),i.vScrollbarWrapper.style.opacity="0"))):void i.scrollTo(e,o,t||0)},_wheel:function(t){var i,e,o,s,n,r=this;if("wheelDeltaX"in t)i=t.wheelDeltaX/12,e=t.wheelDeltaY/12;else if("wheelDelta"in t)i=e=t.wheelDelta/12;else{if(!("detail"in t))return;i=e=3*-t.detail}return"zoom"==r.options.wheelAction?(n=r.scale*Math.pow(2,1/3*(e?e/Math.abs(e):0)),n<r.options.zoomMin&&(n=r.options.zoomMin),n>r.options.zoomMax&&(n=r.options.zoomMax),void(n!=r.scale&&(!r.wheelZoomCount&&r.options.onZoomStart&&r.options.onZoomStart.call(r,t),r.wheelZoomCount++,r.zoom(t.pageX,t.pageY,n,400),setTimeout(function(){r.wheelZoomCount--,!r.wheelZoomCount&&r.options.onZoomEnd&&r.options.onZoomEnd.call(r,t)},400)))):(o=r.x+i,s=r.y+e,o>0?o=0:o<r.maxScrollX&&(o=r.maxScrollX),s>r.minScrollY?s=r.minScrollY:s<r.maxScrollY&&(s=r.maxScrollY),void(r.maxScrollY<0&&r.scrollTo(o,s,0)))},_transitionEnd:function(t){var i=this;t.target==i.scroller&&(i._unbind(E),i._startAni())},_startAni:function(){var t,i,e,s=this,n=s.x,r=s.y,a=Date.now();if(!s.animating){if(!s.steps.length)return void s._resetPos(400);if(t=s.steps.shift(),t.x==n&&t.y==r&&(t.time=0),s.animating=!0,s.moved=!0,s.options.useTransition)return s._transitionTime(t.time),s._pos(t.x,t.y),s.animating=!1,void(t.time?s._bind(E):s._resetPos(0));e=function(){var l,h,c=Date.now();return c>=a+t.time?(s._pos(t.x,t.y),s.animating=!1,s.options.onAnimationEnd&&s.options.onAnimationEnd.call(s),void s._startAni()):(c=(c-a)/t.time-1,i=o.sqrt(1-c*c),l=(t.x-n)*i+n,h=(t.y-r)*i+r,s._pos(l,h),void(s.animating&&(s.aniTime=X(e))))},e()}},_transitionTime:function(t){t+="ms",this.scroller.style[h]=t,this.hScrollbar&&(this.hScrollbarIndicator.style[h]=t),this.vScrollbar&&(this.vScrollbarIndicator.style[h]=t)},_momentum:function(t,i,e,s,n){var r=6e-4,a=o.abs(t)/i,l=a*a/(2*r),h=0,c=0;return t>0&&l>e?(c=n/(6/(l/a*r)),e+=c,a=a*e/l,l=e):0>t&&l>s&&(c=n/(6/(l/a*r)),s+=c,a=a*s/l,l=s),l*=0>t?-1:1,h=a/r,{dist:l,time:o.round(h)}},_offset:function(t){for(var i=-t.offsetLeft,e=-t.offsetTop;t=t.offsetParent;)i-=t.offsetLeft,
e-=t.offsetTop;return t!=this.wrapper&&(i*=this.scale,e*=this.scale),{left:i,top:e}},_snap:function(t,i){var e,s,n,r,a,l,h=this;for(n=h.pagesX.length-1,e=0,s=h.pagesX.length;s>e;e++)if(t>=h.pagesX[e]){n=e;break}for(n==h.currPageX&&n>0&&h.dirX<0&&n--,t=h.pagesX[n],a=o.abs(t-h.pagesX[h.currPageX]),a=a?o.abs(h.x-t)/a*500:0,h.currPageX=n,n=h.pagesY.length-1,e=0;n>e;e++)if(i>=h.pagesY[e]){n=e;break}return n==h.currPageY&&n>0&&h.dirY<0&&n--,i=h.pagesY[n],l=o.abs(i-h.pagesY[h.currPageY]),l=l?o.abs(h.y-i)/l*500:0,h.currPageY=n,r=o.round(o.max(a,l))||200,{x:t,y:i,time:r}},_bind:function(t,i,e){(i||this.scroller).addEventListener(t,this,!!e)},_unbind:function(t,i,e){(i||this.scroller).removeEventListener(t,this,!!e)},destroy:function(){var i=this;i.scroller.style[a]="",i.hScrollbar=!1,i.vScrollbar=!1,i._scrollbar("h"),i._scrollbar("v"),i._unbind(b,t),i._unbind(y),i._unbind(T,t),i._unbind(w,t),i._unbind(Y,t),i.options.hasTouch||(i._unbind("DOMMouseScroll"),i._unbind("mousewheel")),i.options.useTransition&&i._unbind(E),i.options.checkDOMChanges&&clearInterval(i.checkDOMTime),i.options.onDestroy&&i.options.onDestroy.call(i)},refresh:function(){var t,i,e,s,n=this,r=0,a=0;if(n.scale<n.options.zoomMin&&(n.scale=n.options.zoomMin),n.wrapperW=n.wrapper.clientWidth||1,n.wrapperH=n.wrapper.clientHeight||1,n.minScrollY=-n.options.topOffset||0,n.scrollerW=o.round(n.scroller.offsetWidth*n.scale),n.scrollerH=o.round((n.scroller.offsetHeight+n.minScrollY)*n.scale),n.maxScrollX=n.wrapperW-n.scrollerW,n.maxScrollY=n.wrapperH-n.scrollerH+n.minScrollY,n.dirX=0,n.dirY=0,n.options.onRefresh&&n.options.onRefresh.call(n),n.hScroll=n.options.hScroll&&n.maxScrollX<0,n.vScroll=n.options.vScroll&&(!n.options.bounceLock&&!n.hScroll||n.scrollerH>n.wrapperH),n.hScrollbar=n.hScroll&&n.options.hScrollbar,n.vScrollbar=n.vScroll&&n.options.vScrollbar&&n.scrollerH>n.wrapperH,t=n._offset(n.wrapper),n.wrapperOffsetLeft=-t.left,n.wrapperOffsetTop=-t.top,"string"==typeof n.options.snap)for(n.pagesX=[],n.pagesY=[],s=n.scroller.querySelectorAll(n.options.snap),i=0,e=s.length;e>i;i++)r=n._offset(s[i]),r.left+=n.wrapperOffsetLeft,r.top+=n.wrapperOffsetTop,n.pagesX[i]=r.left<n.maxScrollX?n.maxScrollX:r.left*n.scale,n.pagesY[i]=r.top<n.maxScrollY?n.maxScrollY:r.top*n.scale;else if(n.options.snap){for(n.pagesX=[];r>=n.maxScrollX;)n.pagesX[a]=r,r-=n.wrapperW,a++;for(n.maxScrollX%n.wrapperW&&(n.pagesX[n.pagesX.length]=n.maxScrollX-n.pagesX[n.pagesX.length-1]+n.pagesX[n.pagesX.length-1]),r=0,a=0,n.pagesY=[];r>=n.maxScrollY;)n.pagesY[a]=r,r-=n.wrapperH,a++;n.maxScrollY%n.wrapperH&&(n.pagesY[n.pagesY.length]=n.maxScrollY-n.pagesY[n.pagesY.length-1]+n.pagesY[n.pagesY.length-1])}n._scrollbar("h"),n._scrollbar("v"),n.zoomed||(n.scroller.style[h]="0",n._resetPos(400))},scrollTo:function(t,i,e,o){var s,n,r=this,a=t;for(r.stop(),a.length||(a=[{x:t,y:i,time:e,relative:o}]),s=0,n=a.length;n>s;s++)a[s].relative&&(a[s].x=r.x-a[s].x,a[s].y=r.y-a[s].y),r.steps.push({x:a[s].x,y:a[s].y,time:a[s].time||0});r._startAni()},scrollToElement:function(t,i){var e,s=this;t=t.nodeType?t:s.scroller.querySelector(t),t&&(e=s._offset(t),e.left+=s.wrapperOffsetLeft,e.top+=s.wrapperOffsetTop,e.left=e.left>0?0:e.left<s.maxScrollX?s.maxScrollX:e.left,e.top=e.top>s.minScrollY?s.minScrollY:e.top<s.maxScrollY?s.maxScrollY:e.top,i=void 0===i?o.max(2*o.abs(e.left),2*o.abs(e.top)):i,s.scrollTo(e.left,e.top,i))},scrollToPage:function(t,i,e){var o,s,n=this;e=void 0===e?400:e,n.options.onScrollStart&&n.options.onScrollStart.call(n),n.options.snap?(t="next"==t?n.currPageX+1:"prev"==t?n.currPageX-1:t,i="next"==i?n.currPageY+1:"prev"==i?n.currPageY-1:i,t=0>t?0:t>n.pagesX.length-1?n.pagesX.length-1:t,i=0>i?0:i>n.pagesY.length-1?n.pagesY.length-1:i,n.currPageX=t,n.currPageY=i,o=n.pagesX[t],s=n.pagesY[i]):(o=-n.wrapperW*t,s=-n.wrapperH*i,o<n.maxScrollX&&(o=n.maxScrollX),s<n.maxScrollY&&(s=n.maxScrollY)),n.scrollTo(o,s,e)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(T,t),this._unbind(w,t),this._unbind(Y,t)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(E):k(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(t,i,e,o){var s=this,n=e/s.scale;s.options.useTransform&&(s.zoomed=!0,o=void 0===o?200:o,t=t-s.wrapperOffsetLeft-s.x,i=i-s.wrapperOffsetTop-s.y,s.x=t-t*n+s.x,s.y=i-i*n+s.y,s.scale=e,s.refresh(),s.x=s.x>0?0:s.x<s.maxScrollX?s.maxScrollX:s.x,s.y=s.y>s.minScrollY?s.minScrollY:s.y<s.maxScrollY?s.maxScrollY:s.y,s.scroller.style[h]=o+"ms",s.scroller.style[a]="translate("+s.x+"px,"+s.y+"px) scale("+e+")"+_,s.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},s=null,"undefined"!=typeof exports?exports.iScroll=z:t.iScroll=z}(window,document);var prefix="",transitionEnd;!function(){var t,i={Webkit:"webkit",Moz:"",O:"o"},e=document.documentElement,o=function(i){return t?t+i:i.toLowerCase()};for(var s in i)if(void 0!==e.style[s+"TransitionProperty"]){prefix="-"+s.toLowerCase()+"-",t=i[s];break}transitionEnd=o("TransitionEnd")}();